import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.util.Scanner;

public class Encrypt {

	
	public static void main (String [] args){
		String password = "password";
		String text = "thisisatest";
		Double value = 15.47;
		
		String encryptedPassword = Encryption.encryptPassword(password);
		String encryptedText = Encryption.encryptText(text, password);
		String encryptedValue = Encryption.encryptText(value.toString(), password);
		
		FileWriter writer = null;
		
		try {
			writer = new FileWriter("encrytion.csv");
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		try {
			writer.write(encryptedPassword + "," + encryptedText + "," + encryptedValue);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		try {
			writer.flush();
		} catch (IOException e1) {
			// TODO Auto-generated catch block
			e1.printStackTrace();
		}
		try {
			writer.close();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
	BufferedReader br= null;
		
		try {
			br = new BufferedReader(new FileReader("encrytion.csv"));
		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		String dpassword;
		String dtext = "";
		double dvalue = 0;
		
		String line;
		
		Scanner sc = new Scanner(System.in);
		System.out.println("enter password");
		password = sc.nextLine();
		
		while((line = br.readLine())!=null){
			String[] split = line.split(",");
			if(Encryption.checkPassword(split[0], password)){
				text = Encryption.decryptText(split[1], password);
				value = Encryption.decryptValue((split[2]), password);
			}
		}
		
		System.out.println("text : " + dtext + "      value : " + dvalue +"    for password : " + dpassword);
		
	}
}
